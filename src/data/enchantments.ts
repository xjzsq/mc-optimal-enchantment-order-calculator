export type Edition = 0 | 1 | 2; // 0=JE only, 1=BE only, 2=Both

export interface Enchantment {
  id: string;
  nameZh: string;
  nameEn: string;
  maxLevel: number;
  itemMultiplier: number;
  bookMultiplier: number;
  edition: Edition;
  conflicts: string[]; // array of enchantment ids that conflict
  suitable: boolean[]; // 14 booleans for each weapon type
}

export const ENCHANTMENTS: Enchantment[] = [
  {
    id: 'aqua_affinity',
    nameZh: '水下速掘',
    nameEn: 'Aqua Affinity',
    maxLevel: 1,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,true,false,false,false,false,false,false,false,false],
  },
  {
    id: 'bane_of_arthropods',
    nameZh: '节肢杀手',
    nameEn: 'Bane of Arthropods',
    maxLevel: 5,
    itemMultiplier: 2,
    bookMultiplier: 1,
    edition: 2,
    conflicts: ['sharpness','smite','density','breach'],
    suitable: [true,false,true,false,false,false,false,false,false,false,false,false,false,true],
  },
  {
    id: 'blast_protection',
    nameZh: '爆炸保护',
    nameEn: 'Blast Protection',
    maxLevel: 4,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: ['fire_protection','projectile_protection','protection'],
    suitable: [false,false,false,false,false,true,true,true,true,false,false,false,false,false],
  },
  {
    id: 'channeling',
    nameZh: '引雷',
    nameEn: 'Channeling',
    maxLevel: 1,
    itemMultiplier: 8,
    bookMultiplier: 4,
    edition: 2,
    conflicts: ['riptide'],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,true,false,false],
  },
  {
    id: 'binding_curse',
    nameZh: '绑定诅咒',
    nameEn: 'Curse of Binding',
    maxLevel: 1,
    itemMultiplier: 8,
    bookMultiplier: 4,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,true,true,true,true,false,false,false,false,false],
  },
  {
    id: 'vanishing_curse',
    nameZh: '消失诅咒',
    nameEn: 'Curse of Vanishing',
    maxLevel: 1,
    itemMultiplier: 8,
    bookMultiplier: 4,
    edition: 2,
    conflicts: [],
    suitable: [true,true,true,true,true,true,true,true,true,true,true,true,true,true],
  },
  {
    id: 'depth_strider',
    nameZh: '深海探索者',
    nameEn: 'Depth Strider',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: ['frost_walker'],
    suitable: [false,false,false,false,false,false,false,false,true,false,false,false,false,false],
  },
  {
    id: 'efficiency',
    nameZh: '效率',
    nameEn: 'Efficiency',
    maxLevel: 5,
    itemMultiplier: 1,
    bookMultiplier: 1,
    edition: 2,
    conflicts: [],
    suitable: [false,true,true,true,true,false,false,false,false,false,false,false,false,false],
  },
  {
    id: 'feather_falling',
    nameZh: '摔落保护',
    nameEn: 'Feather Falling',
    maxLevel: 4,
    itemMultiplier: 2,
    bookMultiplier: 1,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,true,false,false,false,false,false],
  },
  {
    id: 'fire_aspect',
    nameZh: '火焰附加',
    nameEn: 'Fire Aspect',
    maxLevel: 2,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [true,false,false,false,false,false,false,false,false,false,false,false,false,true],
  },
  {
    id: 'fire_protection',
    nameZh: '火焰保护',
    nameEn: 'Fire Protection',
    maxLevel: 4,
    itemMultiplier: 2,
    bookMultiplier: 1,
    edition: 2,
    conflicts: ['blast_protection','projectile_protection','protection'],
    suitable: [false,false,false,false,false,true,true,true,true,false,false,false,false,false],
  },
  {
    id: 'flame',
    nameZh: '火矢',
    nameEn: 'Flame',
    maxLevel: 1,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,false,true,false,false,false,false],
  },
  {
    id: 'fortune',
    nameZh: '时运',
    nameEn: 'Fortune',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: ['silk_touch'],
    suitable: [false,true,true,true,true,false,false,false,false,false,false,false,false,false],
  },
  {
    id: 'frost_walker',
    nameZh: '冰霜行者',
    nameEn: 'Frost Walker',
    maxLevel: 2,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: ['depth_strider'],
    suitable: [false,false,false,false,false,false,false,false,true,false,false,false,false,false],
  },
  {
    id: 'impaling',
    nameZh: '穿刺',
    nameEn: 'Impaling',
    maxLevel: 5,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,true,false,false],
  },
  {
    id: 'infinity',
    nameZh: '无限',
    nameEn: 'Infinity',
    maxLevel: 1,
    itemMultiplier: 8,
    bookMultiplier: 4,
    edition: 2,
    conflicts: ['mending'],
    suitable: [false,false,false,false,false,false,false,false,false,true,false,false,false,false],
  },
  {
    id: 'knockback',
    nameZh: '击退',
    nameEn: 'Knockback',
    maxLevel: 2,
    itemMultiplier: 2,
    bookMultiplier: 1,
    edition: 2,
    conflicts: [],
    suitable: [true,false,false,false,false,false,false,false,false,false,false,false,false,false],
  },
  {
    id: 'looting',
    nameZh: '抢夺',
    nameEn: 'Looting',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [true,false,false,false,false,false,false,false,false,false,false,false,false,false],
  },
  {
    id: 'loyalty',
    nameZh: '忠诚',
    nameEn: 'Loyalty',
    maxLevel: 3,
    itemMultiplier: 1,
    bookMultiplier: 1,
    edition: 2,
    conflicts: ['riptide'],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,true,false,false],
  },
  {
    id: 'luck_of_the_sea',
    nameZh: '海之眷顾',
    nameEn: 'Luck of the Sea',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,false,true,false],
  },
  {
    id: 'lure',
    nameZh: '饵钓',
    nameEn: 'Lure',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,false,true,false],
  },
  {
    id: 'mending',
    nameZh: '经验修补',
    nameEn: 'Mending',
    maxLevel: 1,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: ['infinity'],
    suitable: [true,true,true,true,true,true,true,true,true,true,true,true,true,true],
  },
  {
    id: 'multishot',
    nameZh: '多重射击',
    nameEn: 'Multishot',
    maxLevel: 1,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: ['piercing'],
    suitable: [false,false,false,false,false,false,false,false,false,false,true,false,false,false],
  },
  {
    id: 'piercing',
    nameZh: '穿透',
    nameEn: 'Piercing',
    maxLevel: 4,
    itemMultiplier: 1,
    bookMultiplier: 1,
    edition: 2,
    conflicts: ['multishot'],
    suitable: [false,false,false,false,false,false,false,false,false,false,true,false,false,false],
  },
  {
    id: 'power',
    nameZh: '力量',
    nameEn: 'Power',
    maxLevel: 5,
    itemMultiplier: 1,
    bookMultiplier: 1,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,false,true,false,false,false,false],
  },
  {
    id: 'projectile_protection',
    nameZh: '弹射物保护',
    nameEn: 'Projectile Protection',
    maxLevel: 4,
    itemMultiplier: 2,
    bookMultiplier: 1,
    edition: 2,
    conflicts: ['blast_protection','fire_protection','protection'],
    suitable: [false,false,false,false,false,true,true,true,true,false,false,false,false,false],
  },
  {
    id: 'protection',
    nameZh: '保护',
    nameEn: 'Protection',
    maxLevel: 4,
    itemMultiplier: 1,
    bookMultiplier: 1,
    edition: 2,
    conflicts: ['blast_protection','fire_protection','projectile_protection'],
    suitable: [false,false,false,false,false,true,true,true,true,false,false,false,false,false],
  },
  {
    id: 'punch',
    nameZh: '冲击',
    nameEn: 'Punch',
    maxLevel: 2,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,false,true,false,false,false,false],
  },
  {
    id: 'quick_charge',
    nameZh: '快速装填',
    nameEn: 'Quick Charge',
    maxLevel: 3,
    itemMultiplier: 2,
    bookMultiplier: 1,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,false,false,true,false,false,false],
  },
  {
    id: 'respiration',
    nameZh: '水下呼吸',
    nameEn: 'Respiration',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,true,false,false,false,false,false,false,false,false],
  },
  {
    id: 'riptide',
    nameZh: '激流',
    nameEn: 'Riptide',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 2,
    conflicts: ['channeling','loyalty'],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,true,false,false],
  },
  {
    id: 'sharpness',
    nameZh: '锋利',
    nameEn: 'Sharpness',
    maxLevel: 5,
    itemMultiplier: 1,
    bookMultiplier: 1,
    edition: 2,
    conflicts: ['bane_of_arthropods','smite','density','breach'],
    suitable: [true,false,true,false,false,false,false,false,false,false,false,false,false,false],
  },
  {
    id: 'silk_touch',
    nameZh: '精准采集',
    nameEn: 'Silk Touch',
    maxLevel: 1,
    itemMultiplier: 8,
    bookMultiplier: 4,
    edition: 2,
    conflicts: ['fortune'],
    suitable: [false,true,true,true,true,false,false,false,false,false,false,false,false,false],
  },
  {
    id: 'smite',
    nameZh: '亡灵杀手',
    nameEn: 'Smite',
    maxLevel: 5,
    itemMultiplier: 2,
    bookMultiplier: 1,
    edition: 2,
    conflicts: ['bane_of_arthropods','sharpness','density','breach'],
    suitable: [true,false,true,false,false,false,false,false,false,false,false,false,false,true],
  },
  {
    id: 'soul_speed',
    nameZh: '灵魂疾行',
    nameEn: 'Soul Speed',
    maxLevel: 3,
    itemMultiplier: 8,
    bookMultiplier: 4,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,true,false,false,false,false,false],
  },
  {
    id: 'sweeping',
    nameZh: '横扫之刃',
    nameEn: 'Sweeping Edge',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 0,
    conflicts: [],
    suitable: [true,false,false,false,false,false,false,false,false,false,false,false,false,false],
  },
  {
    id: 'thorns',
    nameZh: '荆棘',
    nameEn: 'Thorns',
    maxLevel: 3,
    itemMultiplier: 8,
    bookMultiplier: 4,
    edition: 2,
    conflicts: [],
    suitable: [false,false,false,false,false,true,true,true,true,false,false,false,false,false],
  },
  {
    id: 'unbreaking',
    nameZh: '耐久',
    nameEn: 'Unbreaking',
    maxLevel: 3,
    itemMultiplier: 2,
    bookMultiplier: 1,
    edition: 2,
    conflicts: [],
    suitable: [true,true,true,true,true,true,true,true,true,true,true,true,true,true],
  },
  {
    id: 'density',
    nameZh: '致密',
    nameEn: 'Density',
    maxLevel: 5,
    itemMultiplier: 1,
    bookMultiplier: 1,
    edition: 1,
    conflicts: ['sharpness','bane_of_arthropods','smite','breach'],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,false,false,true],
  },
  {
    id: 'breach',
    nameZh: '破甲',
    nameEn: 'Breach',
    maxLevel: 4,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 1,
    conflicts: ['sharpness','bane_of_arthropods','smite','density'],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,false,false,true],
  },
  {
    id: 'wind_burst',
    nameZh: '风爆',
    nameEn: 'Wind Burst',
    maxLevel: 3,
    itemMultiplier: 4,
    bookMultiplier: 2,
    edition: 1,
    conflicts: [],
    suitable: [false,false,false,false,false,false,false,false,false,false,false,false,false,true],
  },
];

export function getEnchantmentsForWeapon(weaponIndex: number, edition: 0 | 1 | 2): Enchantment[] {
  return ENCHANTMENTS.filter(e => {
    if (!e.suitable[weaponIndex]) return false;
    if (edition === 0) return e.edition === 0 || e.edition === 2; // Java: show JE-only and both
    if (edition === 1) return e.edition === 1 || e.edition === 2; // Bedrock: show BE-only and both
    return true;
  });
}
